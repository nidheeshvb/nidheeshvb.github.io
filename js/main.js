(()=>{gsap.registerPlugin(ScrollTrigger);var e=null,t=1200,i=!1;function r(){return window.innerWidth>=t}function n(){e&&(e.kill(),e=null),ScrollTrigger.getAll().forEach((function(e){e.vars&&".section-wrapper"===e.vars.trigger&&e.kill()}))}function o(){if(r()){var e=document.querySelector("#infoGrid"),t=document.querySelector(".stage");if(e&&t){var i=window.getComputedStyle(e),n="0"!==i.opacity&&"hidden"!==i.visibility,o=e.style.opacity,s=e.style.visibility,a=e.style.pointerEvents;e.style.opacity="1",e.style.visibility="visible",e.style.pointerEvents="auto",e.style.transform="translateX(0)",e.offsetHeight;var l=e.offsetHeight,c=document.querySelector("#visualContainer"),u=c?c.offsetHeight:790,p=Math.max(l,u)+100;t.style.minHeight="".concat(p,"px"),n?(e.style.opacity="1",e.style.visibility="visible",e.style.pointerEvents="auto",e.style.transform=""):(e.style.opacity=o||"0",e.style.visibility=s||"visible",e.style.pointerEvents=a||"none",e.style.transform=o?"":"translateX(-50px)")}}}function s(){if(r()){n(),i=!1,gsap.set(".circle",{scale:.5}),gsap.set("#mainCard",{opacity:1,y:500,scale:1,visibility:"hidden"}),gsap.set("#secondCard",{opacity:0,visibility:"hidden"}),gsap.set("#applyBtn",{opacity:0,y:50}),gsap.set("#visualContainer",{left:"50%",xPercent:-50}),gsap.set("#infoGrid",{opacity:0,visibility:"visible",x:-50,pointerEvents:"none"}),o();var t=document.querySelector("#infoGrid"),s=document.querySelector(".stage"),a="+=350%",l=0;if(t&&s){var c=window.getComputedStyle(t),u="0"!==c.opacity&&"hidden"!==c.visibility;u||(t.style.opacity="1",t.style.visibility="visible",t.style.transform="translateX(0)"),t.offsetHeight;var p=t.scrollHeight,d=t.clientHeight,y=window.innerHeight;l=Math.max(0,p-d),a="+=".concat(350+(l>0?l/y*100:0),"%"),u||(t.style.opacity="0",t.style.visibility="visible",t.style.transform="translateX(-50px)")}(e=gsap.timeline({scrollTrigger:{trigger:".section-wrapper",start:"top top",end:a,scrub:1,pin:!0,pinSpacing:!0,anticipatePin:1,onLeave:function(){},onUpdate:function(e){if(l>0&&e.progress>.75){var t=(e.progress-.75)/.25,i=document.querySelector("#infoGrid");i&&(i.scrollTop=l*Math.min(1,t))}}}})).to(".circle",{scale:1,duration:1.2,stagger:.15,ease:"power4.out"},1),e.to("#mainCard",{y:0,visibility:"visible",duration:2,ease:"power3.out"},2),e.to("#applyBtn",{opacity:1,y:0,duration:1.5,ease:"power3.out"},3),e.to("#visualContainer",{left:"80%",xPercent:-50,duration:1.5,ease:"power4.inOut"},3.5),e.to(".circle",{scale:1,duration:.5,stagger:.05,ease:"power4.out"},4.2),e.to("#secondCard",{opacity:1,visibility:"visible",duration:2,ease:"power3.out"},4.5),e.to("#infoGrid",{opacity:1,visibility:"visible",x:0,duration:1,ease:"power2.out",pointerEvents:"auto",onComplete:function(){if(!i){var t=document.querySelector("#applyBtn"),r=null,n=null,s=null,a=null,l=null;t&&(r=gsap.getProperty(t,"y"),n=gsap.getProperty(t,"opacity"),l=e.getTweensOf(t)),e.scrollTrigger?(s=e.scrollTrigger.progress,a=e.scrollTrigger):s=e.progress(),l&&l.length>0&&l.forEach((function(e){return e.pause()})),t&&null!==r&&null!==n&&gsap.set(t,{y:r,opacity:n,immediateRender:!0,overwrite:"all"}),o(),i=!0,requestAnimationFrame((function(){t&&null!==r&&null!==n&&gsap.set(t,{y:r,opacity:n,immediateRender:!0,overwrite:"all"}),requestAnimationFrame((function(){a?a.refresh():ScrollTrigger.refresh(),t&&null!==r&&null!==n&&(gsap.set(t,{y:r,opacity:n,immediateRender:!0,overwrite:"all"}),e.scrollTrigger&&null!==s&&(e.scrollTrigger.progress=s,e.progress(s)),l&&l.length>0&&l.forEach((function(t){var i=t.startTime(),r=t.duration(),n=e.duration(),o=0;if(null!==s&&n>0){var a=s*n;a>=i&&(o=Math.min(1,(a-i)/r))}t.progress(o),t.resume()}))),requestAnimationFrame((function(){t&&null!==r&&null!==n&&(gsap.set(t,{y:r,opacity:n,immediateRender:!0,overwrite:"all"}),e.scrollTrigger&&null!==s&&(e.scrollTrigger.progress=s,e.progress(s)))}))}))}))}}},4.2),e.to(".circle",{scale:.75,duration:.5,stagger:.05,ease:"power4.out"},4.7),e.to(".circle",{scale:1,duration:.5,stagger:.05,ease:"power4.out"},4.8)}else n()}window.addEventListener("load",(function(){var e;s(),(e=document.querySelector("#infoGrid"))&&e.addEventListener("wheel",(function(e){e.preventDefault(),window.scrollBy(0,e.deltaY)}),{passive:!1}),function(){var e=document.querySelector("#bottomNavDropdown"),t=document.querySelector("#bottomNavLinks"),i=document.querySelector(".dropdown-text"),n=t?t.querySelectorAll("a"):[];function o(){e.classList.remove("active"),e.setAttribute("aria-expanded","false"),t.classList.remove("active")}e&&t&&(e.addEventListener("click",(function(i){i.stopPropagation(),e.classList.contains("active")?o():(e.classList.add("active"),e.setAttribute("aria-expanded","true"),t.classList.add("active"))})),n.forEach((function(e){e.addEventListener("click",(function(t){var r=e.textContent.trim();i&&(i.textContent=r),o()}))})),document.addEventListener("click",(function(i){e&&t&&!e.contains(i.target)&&!t.contains(i.target)&&o()})),window.addEventListener("resize",(function(){r()&&o()})))}()}));var a,l,c=(a=function(){s(),ScrollTrigger.refresh()},function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];clearTimeout(l),l=setTimeout((function(){clearTimeout(l),a.apply(void 0,t)}),250)});window.addEventListener("resize",c)})();